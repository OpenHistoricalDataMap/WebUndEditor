
<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Open Historical Data Map (OHDM)</title>
    <link rel="stylesheet" href="https://openlayers.org/en/v4.0.1/css/ol.css" type="text/css">
    <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="https://openlayers.org/en/v4.0.1/build/ol.js"></script>
</head>
<body>


<h1>Open Historic Data Map</h1>
<a href="http://www.sharksystem.net">We</a> are working on a system like
<a href="http://www.osm.org">Open Street Map</a> but for historic data. That page is just for some basic tests.

A sketch of our plans can be found on <a href="https://www.researchgate.net/publication/303818952_Open_Historical_Data_Map_OHDM_-_work_in_progress">ResearchGate</a>

<div
        id="map"
        style="width: 1024px; height: 512px; border: 3px solid #000">
</div>

Time dimension is already implemented (note date parameter in URL).
There are no valid historical data in the system, though....

<br/>
Those buttons are not meant to produce valid output but to help
while coding the system.

<table>
    <tr>

        <td>
            <form method="post" action="index_i.html?date=1900-01-01">
                <input type="submit" value="1900">
            </form>
        </td>

        <td>
            <form method="post" action="index_i.html?date=2014-01-01">
                <input type="submit" value="2014">
            </form>
        </td>

        <td>
            <form method="post" action="index_i.html?date=2017-01-01">
                <input type="submit" value="2017">
            </form>
        </td>

    </tr> </table>

<br/>
for development purposes: switch between test data:
<table>
    <tr>

        <td>
            <form method="post" action="index_i.html?">
                <input type="submit" value="Integration DB">
            </form>
        </td>

        <td>
            <form method="post" action="index_t.html">
                <input type="submit" value="Test DB">
            </form>
        </td>


        <td>
            <form method="post" action="index_p.html">
                <input type="submit" value="future public DB">
            </form>
        </td>

    </tr> </table>

<script>
    var date = location.search.split('date=')[1] ? location.search.split('date=')[1] : '2017-01-01';
    var mapdate = 'date:' + date;

    var highway_lines =
        new ol.layer.Tile({
            extent: [1444503.7756570787,6861512.981594484,1532647.2409866685,6922911.69188154],
            source: new ol.source.TileWMS({
                url: 'http://ohm.f4.htw-berlin.de:8080/geoserver/ohdm_i/wms',
                params: {'LAYERS': 'ohdm_i:highway_lines', 'format': 'image/png', 'viewparams': mapdate}
                /*
                zIndex: 0,
                minResolution 200,
                maxResolution 2000
                */
            })
        })

    var boundary_lines =
        new ol.layer.Tile({
            extent: [1444503.7756570787,6861512.981594484,1532647.2409866685,6922911.69188154],
            source: new ol.source.TileWMS({
                url: 'http://ohm.f4.htw-berlin.de:8080/geoserver/ohdm_i/wms',
                params: {'LAYERS': 'ohdm_i:boundary_lines', 'format': 'image/png', 'viewparams': mapdate}
                /*
                zIndex: 0,
                minResolution 200,
                maxResolution 2000
                */
            })
        })

    var railway_lines =
        new ol.layer.Tile({
            extent: [1444503.7756570787,6861512.981594484,1532647.2409866685,6922911.69188154],
            source: new ol.source.TileWMS({
                url: 'http://ohm.f4.htw-berlin.de:8080/geoserver/ohdm_i/wms',
                params: {'LAYERS': 'ohdm_i:railway_lines', 'format': 'image/png', 'viewparams': mapdate}
                /*
                zIndex: 0,
                minResolution 200,
                maxResolution 2000
                */
            })
        })

    var building_polygons =
        new ol.layer.Tile({
            extent: [1444503.7756570787,6861512.981594484,1532647.2409866685,6922911.69188154],
            source: new ol.source.TileWMS({
                url: 'http://ohm.f4.htw-berlin.de:8080/geoserver/ohdm_i/wms',
                params: {'LAYERS': 'ohdm_i:building_polygons', 'format': 'image/png', 'viewparams': mapdate}
            })
        })

    var map = new ol.Map({
        target: 'map',
        view: new ol.View({
            center: [1492062.75385, 6895234.55805],
            zoom: 14
        })
    });

    map.addLayer(boundary_lines);
    map.addLayer(building_polygons);
    map.addLayer(highway_lines);
    map.addLayer(railway_lines);


    map.addControl(new OpenLayers.Control.LayerSwitcher());

</script>
</body>
</html>
